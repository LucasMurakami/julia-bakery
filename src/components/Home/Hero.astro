---
import cookiesBanner1 from '@/assets/cookies/Cookies-banner.webp';
import mooncakesBanner from '@/assets/mooncakes/Mooncake-banner.webp';
import mooncakeProduct from '@/assets/mooncakes/Mooncake-product-white.webp';

const heroSlides = [cookiesBanner1, mooncakesBanner, mooncakeProduct];
---

<section
	class="hero-section relative flex min-h-[100dvh] flex-col justify-between overflow-hidden bg-neutral-800"
	aria-label="Hero"
>
	<!-- Image carousel (crossfade) -->
	<div class="absolute inset-0" aria-hidden="true">
		{heroSlides.map((image, i) => (
			<img
				src={image.src}
				width={image.width}
				height={image.height}
				alt=""
				class="hero-slide absolute inset-0 h-full w-full object-cover object-center opacity-0 transition-opacity duration-[1500ms] ease-out"
				data-slide={i}
				fetchpriority={i === 0 ? 'high' : 'low'}
				loading={i === 0 ? 'eager' : 'lazy'}
				decoding={i === 0 ? 'sync' : 'async'}
			/>
		))}
	</div>
	<div class="absolute inset-0 bg-black/35" aria-hidden="true"></div>

	<div class="relative z-10 flex flex-1 flex-col justify-end px-6 pb-20 pt-28 md:justify-between md:px-10 lg:px-16">
		<div class="hero-cta flex items-end justify-between gap-8 md:flex-1 md:flex-col md:items-start md:justify-between">
			<div class="contents md:flex md:flex-1 md:items-end">
				<h1 class="hero-title max-w-2xl text-4xl font-bold uppercase leading-tight text-white drop-shadow-md md:text-5xl lg:text-6xl xl:text-7xl">
					Felicidade em Cada Mordida
				</h1>
			</div>
			<a
				href="#about"
				class="flex h-24 w-24 shrink-0 items-center justify-center rounded-full bg-[hsl(var(--accent))] text-xs font-bold uppercase tracking-wider text-white shadow-xl transition-transform hover:scale-105 md:h-32 md:w-32 md:self-end md:text-sm lg:h-40 lg:w-40 lg:text-base xl:h-48 xl:w-48 xl:text-lg"
				aria-label="Indulge - conheça nossa padaria"
			>
				<span class="rotate-[-8deg]">Peça Já!</span>
			</a>
		</div>
	</div>

	<!-- Curved bottom edge -->
	<div class="absolute bottom-0 left-0 right-0 z-10 h-16 w-full overflow-hidden md:h-20" aria-hidden="true">
		<svg
			class="absolute bottom-0 h-full w-full"
			viewBox="0 0 1440 80"
			fill="none"
			xmlns="http://www.w3.org/2000/svg"
			preserveAspectRatio="none"
		>
			<path
				d="M0 80V40C240 0 480 0 720 40C960 80 1200 80 1440 40V80H0Z"
				fill="hsl(var(--background))"
			></path>
		</svg>
	</div>
</section>

<script>
	function initHeroCarousel() {
		const slides = document.querySelectorAll('.hero-slide');
		if (!slides.length) return;
		const SLIDE_DURATION = 5000;
		let current = 0;
		slides[0].classList.add('opacity-100');
		setInterval(() => {
			slides[current].classList.remove('opacity-100');
			current = (current + 1) % slides.length;
			slides[current].classList.add('opacity-100');
		}, SLIDE_DURATION);
	}
	initHeroCarousel();
</script>

<style>
	:global(.min-h-\[100dvh\]) {
		min-height: 100dvh;
	}
	.hero-title {
		transform: translateY(20px);
		animation: heroTitleIn 0.9s cubic-bezier(0.22, 1, 0.36, 1) 0.1s both;
	}
	@keyframes heroTitleIn {
		to {
			transform: translateY(0);
		}
	}
	.hero-cta a {
		opacity: 0;
		transform: scale(0.9);
		animation: heroCtaIn 0.6s cubic-bezier(0.22, 1, 0.36, 1) 0.6s forwards;
	}
	@keyframes heroCtaIn {
		to {
			opacity: 1;
			transform: scale(1);
		}
	}
</style>
